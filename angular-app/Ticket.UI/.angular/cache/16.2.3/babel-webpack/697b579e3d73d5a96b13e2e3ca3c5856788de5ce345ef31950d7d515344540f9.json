{"ast":null,"code":"var _class;\nimport { environment } from \"../../../environments/environment\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../../services/events.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction TicketinformationComponent_tr_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"date\");\n    i0.ɵɵpipe(8, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ticket_r2 = ctx.$implicit;\n    const i_r3 = ctx.index;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.events[i_r3] == null ? null : ctx_r0.events[i_r3].eventTitle);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ticket_r2.ticketName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind2(7, 5, ctx_r0.events[i_r3] == null ? null : ctx_r0.events[i_r3].eventStartDate, \"dd/MM/yyyy\"), \"-\", i0.ɵɵpipeBind2(8, 8, ctx_r0.events[i_r3] == null ? null : ctx_r0.events[i_r3].eventEndDate, \"dd/MM/yyyy\"), \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ticket_r2.amount);\n  }\n}\nfunction TicketinformationComponent_p_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"No Tickets For The Name Provided\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class TicketinformationComponent {\n  constructor(http, eventsService) {\n    this.http = http;\n    this.eventsService = eventsService;\n    this.tickets = [];\n    this.events = [];\n    this.baseApiUrl = environment.baseapiUrl;\n    this.searchText = '';\n  }\n  searchTickets() {\n    this.tickets = [];\n    this.http.get(this.baseApiUrl + '/api/payments/' + this.searchText).subscribe({\n      next: ticketRequest => {\n        this.tickets = ticketRequest;\n        this.loadEventDetailsForTickets();\n      },\n      error: error => {\n        console.error('Error fetching tickets:', error);\n        // Handle the error, e.g., display an error message to the user\n      }\n    });\n  }\n\n  loadEventDetailsForTickets() {\n    for (const ticket of this.tickets) {\n      // Make an HTTP request to fetch event data based on ticket.eventId\n      this.eventsService.getEvent(ticket.ticketEventId).subscribe({\n        next: eventData => {\n          // Assign event data to the ticket\n          this.events.push(eventData);\n        },\n        error: error => {\n          console.error('Error fetching event data for ticket:', error);\n          // Handle the error, e.g., display an error message to the user\n        }\n      });\n    }\n  }\n}\n_class = TicketinformationComponent;\n_class.ɵfac = function TicketinformationComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.EventsService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-ticketinformation\"]],\n  decls: 24,\n  vars: 3,\n  consts: [[1, \"container\", \"text-center\", \"mt-4\"], [1, \"ml-3\"], [1, \"form-group\", \"ml-3\"], [1, \"input-group\", \"mb-3\", \"text-center\"], [\"type\", \"text\", \"placeholder\", \"Enter Ticket Name\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"input-group-append\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"table\", \"table-striped\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"]],\n  template: function TicketinformationComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n      i0.ɵɵtext(2, \"Ticket Information\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 1)(4, \"div\", 2)(5, \"div\", 3)(6, \"input\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function TicketinformationComponent_Template_input_ngModelChange_6_listener($event) {\n        return ctx.searchText = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 5)(8, \"button\", 6);\n      i0.ɵɵlistener(\"click\", function TicketinformationComponent_Template_button_click_8_listener() {\n        return ctx.searchTickets();\n      });\n      i0.ɵɵtext(9, \"Search\");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(10, \"table\", 7)(11, \"thead\")(12, \"tr\")(13, \"th\");\n      i0.ɵɵtext(14, \"Event Title\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"th\");\n      i0.ɵɵtext(16, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"th\");\n      i0.ɵɵtext(18, \"Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"th\");\n      i0.ɵɵtext(20, \"Amount\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(21, \"tbody\");\n      i0.ɵɵtemplate(22, TicketinformationComponent_tr_22_Template, 11, 11, \"tr\", 8);\n      i0.ɵɵtemplate(23, TicketinformationComponent_p_23_Template, 2, 0, \"p\", 9);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.searchText);\n      i0.ɵɵadvance(16);\n      i0.ɵɵproperty(\"ngForOf\", ctx.tickets);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.tickets.length == 0);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i3.DatePipe],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["environment","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ctx_r0","events","i_r3","eventTitle","ticket_r2","ticketName","ɵɵtextInterpolate2","ɵɵpipeBind2","eventStartDate","eventEndDate","amount","TicketinformationComponent","constructor","http","eventsService","tickets","baseApiUrl","baseapiUrl","searchText","searchTickets","get","subscribe","next","ticketRequest","loadEventDetailsForTickets","error","console","ticket","getEvent","ticketEventId","eventData","push","ɵɵdirectiveInject","i1","HttpClient","i2","EventsService","selectors","decls","vars","consts","template","TicketinformationComponent_Template","rf","ctx","ɵɵlistener","TicketinformationComponent_Template_input_ngModelChange_6_listener","$event","TicketinformationComponent_Template_button_click_8_listener","ɵɵtemplate","TicketinformationComponent_tr_22_Template","TicketinformationComponent_p_23_Template","ɵɵproperty","length"],"sources":["D:\\D program files\\projectsdotnet\\angular\\second\\Ticket.UI\\src\\app\\components\\ticketinformation\\ticketinformation.component.ts","D:\\D program files\\projectsdotnet\\angular\\second\\Ticket.UI\\src\\app\\components\\ticketinformation\\ticketinformation.component.html"],"sourcesContent":["import {Component} from '@angular/core';\nimport {HttpClient} from \"@angular/common/http\";\nimport {environment} from \"../../../environments/environment\";\nimport {TicketModel} from \"../../models/ticket.model\";\nimport {EventsService} from \"../../services/events.service\";\nimport {EventModel} from \"../../models/event.model\";\n\n@Component({\n  selector: 'app-ticketinformation',\n  templateUrl: './ticketinformation.component.html',\n  styleUrls: ['./ticketinformation.component.css']\n})\nexport class TicketinformationComponent {\n\n  constructor(private http: HttpClient,private eventsService:EventsService) {\n\n  }\n  tickets: TicketModel[] = [];\n  events:EventModel[]=[];\n  baseApiUrl: string = environment.baseapiUrl;\n  searchText: string = '';\n\n  searchTickets(){\n    this.tickets=[]\n    this.http.get<TicketModel[]>(this.baseApiUrl + '/api/payments/' + this.searchText).subscribe({\n      next: (ticketRequest) => {\n        this.tickets=ticketRequest;\n        this.loadEventDetailsForTickets()\n      },error: (error) => {\n        console.error('Error fetching tickets:', error);\n        // Handle the error, e.g., display an error message to the user\n      }\n    });\n  }\n  loadEventDetailsForTickets() {\n    for (const ticket of this.tickets) {\n      // Make an HTTP request to fetch event data based on ticket.eventId\n      this.eventsService.getEvent(ticket.ticketEventId).subscribe({\n        next: (eventData) => {\n          // Assign event data to the ticket\n          this.events.push(eventData);\n        },\n        error: (error) => {\n          console.error('Error fetching event data for ticket:', error);\n          // Handle the error, e.g., display an error message to the user\n        }\n      });\n    }\n  }\n\n}\n","<div class=\"container text-center mt-4\">\n  <h1>Ticket Information</h1>\n\n  <div class=\"ml-3\">\n    <div class=\"form-group ml-3\">\n      <div class=\"input-group mb-3 text-center\">\n        <input type=\"text\" [(ngModel)]=\"searchText\" class=\"form-control \" placeholder=\"Enter Ticket Name\"/>\n        <div class=\"input-group-append\">\n          <button (click)=\"searchTickets()\" class=\"btn btn-primary\">Search</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <table class=\"table table-striped\">\n    <thead>\n    <tr>\n      <th>Event Title</th>\n      <th>Name</th>\n      <th>Date</th>\n      <th>Amount</th>\n\n    </tr>\n    </thead>\n    <tbody>\n    <tr *ngFor=\"let ticket of tickets; let i = index\">\n      <td>{{ events[i]?.eventTitle }}</td>\n      <td>{{ ticket.ticketName }}</td>\n      <td>{{ events[i]?.eventStartDate | date: 'dd/MM/yyyy' }}-{{events[i]?.eventEndDate | date: 'dd/MM/yyyy' }}</td>\n      <td>{{ ticket.amount }}</td>\n\n    </tr>\n    <p *ngIf=\"tickets.length==0\">No Tickets For The Name Provided</p>\n    </tbody>\n  </table>\n</div>\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}